<view class="page-shell ui-page pb-40rpx">
  <view class="ui-header pb-16rpx">
    <view>
      <view class="text-36rpx font-bold text-hex-111827">个人中心</view>
      <view class="text-24rpx text-hex-6B7280 mt-8rpx">管理您的账户与设置</view>
    </view>
  </view>

  <!-- 1. 用户信息卡片 -->
  <view class="px-32rpx mt-16rpx">
    <view class="bg-white rounded-32rpx p-40rpx shadow-sm flex items-center">
      <view
        class="w-120rpx h-120rpx rounded-full bg-hex-F0FDFA border-4rpx border-hex-CCFBF1 flex items-center justify-center text-hex-0D9488 text-48rpx font-bold shadow-inner">
        {{ user.username ? user.username[0] : 'U' }}
      </view>
      <view class="ml-32rpx flex-grow">
        <view class="flex items-center gap-16rpx">
          <text class="text-36rpx font-bold text-hex-1F2937">{{ user.username || '加载中...' }}</text>
          <view
            class="bg-hex-F3F4F6 text-hex-4B5563 text-20rpx px-12rpx py-4rpx rounded-8rpx font-medium border border-hex-E5E7EB">
            {{ user.role }}
          </view>
        </view>
        <view class="text-24rpx text-hex-9CA3AF mt-8rpx font-mono">UID: {{ user.id || '-' }}</view>
      </view>
    </view>
  </view>

  <!-- 2. 资产只读卡片 -->
  <view class="px-32rpx mt-32rpx">
    <view
      class="bg-gradient-to-br from-hex-0D9488 to-hex-0F766E rounded-32rpx p-40rpx text-white shadow-lg relative overflow-hidden">
      <!-- 装饰圆 -->
      <view class="absolute -right-40rpx -top-40rpx w-200rpx h-200rpx bg-white opacity-10 rounded-full blur-xl"></view>

      <view class="flex items-center gap-16rpx mb-16rpx opacity-90">
        <van-icon name="balance-o" size="18px" />
        <text class="text-26rpx font-medium">可用现金余额</text>
      </view>
      <view class="text-64rpx font-bold font-numeric tracking-wide">
        ¥{{ user.availableCash }}
      </view>
      <view class="mt-24rpx text-22rpx opacity-70 flex items-center gap-8rpx">
        <van-icon name="info-o" />
        <text>该资金用于基金买入补仓</text>
      </view>
    </view>
  </view>

  <!-- 3. 功能设置 -->
  <view class="px-32rpx mt-40rpx">
    <view class="text-28rpx font-bold text-hex-374151 mb-16rpx px-8rpx">功能设置</view>
    <view class="bg-white rounded-24rpx overflow-hidden shadow-sm">
      <van-cell-group border="{{ false }}">
        <van-cell center border="{{ false }}" title-class="font-bold text-hex-1F2937">
          <view slot="title" class="flex flex-col">
            <text class="text-30rpx">AI 自动跟投</text>
            <text class="text-22rpx text-hex-9CA3AF mt-4rpx font-normal">每日 14:40 自动执行策略分析与交易</text>
          </view>
          <van-switch slot="right-icon" checked="{{ user.isAiAgent }}" size="24px" active-color="#0D9488"
            bind:change="onAiSwitchChange" disabled="{{ loading }}" />
        </van-cell>
      </van-cell-group>
    </view>
  </view>

  <!-- 4. 退出登录 -->
  <view class="px-32rpx mt-60rpx">
    <button
      class="w-full bg-white text-hex-EF4444 text-30rpx font-bold py-24rpx rounded-full border border-hex-FEE2E2 active:bg-hex-FEF2F2 shadow-sm flex items-center justify-center gap-16rpx transition-all"
      bindtap="handleLogout">
      <van-icon name="revoke" />
      退出登录
    </button>
    <view class="text-center text-20rpx text-hex-D1D5DB mt-32rpx mb-20rpx">
      Fund Assistant v9.6.0
    </view>
  </view>

  <!-- 全局组件 -->
  <van-toast id="van-toast" />
  <van-dialog id="van-dialog" />
</view>